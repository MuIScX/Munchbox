# Bayesian Inventory Forecasting Engine

## Created by Munchbox Team

## What is this?

This is the statistical engine for the **Munchbox Inventory Recommendation System**. It predicts daily ingredient demand using a **Bayesian Structural Time Series (BSTS)** model and calculates the optimal order quantity to maximize profit by using **Newsvendor Problem** Algorithm for restaurant inventory.

## Tech Stack & Rationale

This isn't just a simple script, it leverages specific scientific libraries to handle uncertainty of demand:

* **PyMC (Probabilistic Modeling):** We use this to run the **No-U-Turn Sampler (NUTS)**. This is advanced version Markov chain Monte Carlo (MCMC) algorithm, which allows us to generate a full probability distribution for upcoming future demand, rather than a risky single-point prediction.
* **NumPy (Vectorization):** Used to simulate thousands of financial scenarios instantly. By vectorizing the "loss function," we can compare the cost of waste vs. lost profit across 2,000+ potential futures in milliseconds.
* **Matplotlib (Visualization):** Used to render the "High Density Interval" (HDI) or Likely Demand, the shaded fan chart that visually communicates risk to the restaurant manager.

**Note on Privacy:**
The data in this repository is **synthetic**. I generated dummy sales logs (generated by using Poisson distributions) to demonstrate how the code works without uploading the restaurant's actual sensitive sales records.

## How to Run

Before running the program, make sure you have Python installed before running this program.

1. **Initialize Virtual Environment:**
    First, create virtual environment, this is to manage the dependencies of the libraries used for the model
    
    ```bash
    # Create the environment
    python -m venv venv
    ```
    ``` bash
    # Activate the environment
    # Windows:
    venv\Scripts\activate
    # Mac/Linux:
    source venv/bin/activate
    ```

2.  **Install requirements:**
    (Python 3.11+ recommended, this is due to library)

    ```bash
    pip install -r requirements.txt
    ```

3.  **Run the script:**

    ```bash
    python src/Bayes_Inventory_Imp_v2.py
    ```

4.  **Enter Inputs:**
    Since the system isn't directly connected to the restaurant's POS for margin data, you will need to type in the economic variables manually when prompted. The input is as follows:

    * **Ingredient:** Name of the item (e.g., `chicken` or `shrimp`), this ingredient must exist in bill of material and inventory.
    * **Cost of Waste:** How much money you lose if 1g spoils (e.g., `0.05`).
    * **Cost of Lost Sales:** How much profit you miss if you run out of 1g (e.g., `0.20`).
    * **Forecast Days:** How far ahead to predict (e.g., `2`).

    *Note that all of the numeric values for Cost of Waste and Cost of Lost Sales are based on THB

## General idea of How it Works?

* **Forecasting:** It uses `PyMC` to generate a probability distribution (fan chart) for future demand for specific forecasting period.
* **Optimization:** It uses `NumPy` to run a Newsvendor simulation. If the "Cost of Lost Sales" is high, it recommends an aggressive strategy (stocking extra). If "Cost of Waste" is high, it recommends a conservative strategy.
